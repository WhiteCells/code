
```shell
flask db init
flask db migrate
flask db upgrade
flask admin init

flask --app app.py run -h 0.0.0.0 -p 8000 --debug
```

```shell
pip install -r requirements.txt
```

```shell
https://pypi.tuna.tsinghua.edu.cn/simple
```

## åº”ç”¨ç»“æ„

```åº”ç”¨ç»“æ„
Pear Admin Flask
â”œâ”€applications  # åº”ç”¨
â”‚  â”œâ”€extensions  # æ³¨å†Œæ’ä»¶
â”‚  â”œâ”€models  # æ•°æ®æ¨¡å‹
â”‚  â”œâ”€static  # é™æ€èµ„æºæ–‡ä»¶
â”‚  â”œâ”€templates  # é™æ€æ¨¡æ¿æ–‡ä»¶
â”‚  â””â”€views  # è§†å›¾éƒ¨åˆ†
â”‚     â”œâ”€admin  # åå°ç®¡ç†è§†å›¾æ¨¡å—
â”‚     â””â”€index  # å‰å°è§†å›¾æ¨¡å—
â”œâ”€docs  # æ–‡æ¡£è¯´æ˜
â”œâ”€migrations  # è¿ç§»æ–‡ä»¶è®°å½•
â”œâ”€requirement  # ä¾èµ–æ–‡ä»¶
â””â”€.env # é¡¹ç›®çš„é…ç½®æ–‡ä»¶
```

## èµ„æºç»“æ„

```èµ„æºç»“æ„
Pear Admin Flask
â”œâ”€static    # é¡¹ç›®è®¾å®šçš„ Flask èµ„æºæ–‡ä»¶å¤¹
â”‚  â”œâ”€admin    # pear admin flask çš„åç«¯èµ„æºæ–‡ä»¶ï¼ˆä¸ pear admin layui åŒæ­¥ï¼‰
â”‚  â”œâ”€index    # pear admin flask çš„å‰ç«¯èµ„æºæ–‡ä»¶
â”‚  â””â”€upload     # ç”¨æˆ·ä¸Šä¼ ä¿å­˜ç›®å½•
â””â”€templates # é¡¹ç›®è®¾å®šçš„ Flask æ¨¡æ¿æ–‡ä»¶å¤¹
  â”œâ”€admin   # pear admin flask çš„åç«¯ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€admin_log    # æ—¥å¿—é¡µé¢
  â”‚  â”œâ”€common       # åŸºæœ¬æ¨¡æ¿é¡µé¢ï¼ˆå¤´éƒ¨æ¨¡æ¿ä¸é¡µè„šæ¨¡æ¿ï¼‰
  â”‚  â”œâ”€console      # ç³»ç»Ÿç›‘æ§é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€dept         # éƒ¨é—¨ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€dict         # æ•°æ®è‡ªåŠ¨é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€mail         # é‚®ä»¶ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€photo        # å›¾ç‰‡ä¸Šä¼ é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€power        # æƒé™ï¼ˆèœå•ï¼‰ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€role         # è§’è‰²ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€task         # ä»»åŠ¡è®¾ç½®é¡µé¢æ¨¡æ¿
  â”‚  â””â”€user         # ç”¨æˆ·ç®¡ç†é¡µé¢æ¨¡æ¿
  â”œâ”€errors  # é”™è¯¯é¡µé¢æ¨¡æ¿
  â””â”€index   # ä¸»é¡µæ¨¡æ¿
```

## ä¿®æ”¹é…ç½®

> **ğŸ’¡æç¤º** é…ç½®æ–‡ä»¶ä½äº  `applications/config.py` ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶çœ‹åˆ°çš„æ˜¯ä½äº `BaseConfig` ç±»ä¸‹çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„é…ç½®ç±»å¹¶ç»§æ‰¿ `BaseConfig` ç±»ã€‚
é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨ `applications/__init__.py` ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­åŠ è½½äº†ç¨‹åºçš„é…ç½®ï¼Œæ‰€ä»¥åœ¨æ‚¨ç¼–å†™äº†è‡ªå·±çš„ç±»åä¸è¦å¿˜è®°åœ¨æ–‡ä»¶ `applications/__init__.py` ä¸­ä¿®æ”¹ä½¿ç”¨çš„é…ç½®ç±»ã€‚

> **âš ï¸æ³¨æ„** é…ç½®æ–‡ä»¶ä¸­å¯¹äºæ•°æ®åº“çš„é…ç½®æœ‰æ‰€æ›´æ”¹ï¼Œè¯·æŸ¥çœ‹ä»£ç ä¸­çš„æ³¨é‡Šä¿®æ”¹é…ç½®ã€‚

```python
# éƒ¨åˆ†é…ç½®ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤º

# éªŒè¯å¯†é’¥ï¼ˆâš ï¸ ä¸€å®šè¦è®°å¾—ä¿®æ”¹ âš ï¸ï¼‰
SECRET_KEY = "pear-system-flask"

# æ•°æ®åº“çš„é…ç½®ä¿¡æ¯
SQLALCHEMY_DATABASE_URI = 'sqlite:///../pear.db'

# é»˜è®¤æ—¥å¿—ç­‰çº§
LOG_LEVEL = logging.WARN

# flask-mailé…ç½®
MAIL_SERVER = 'smtp.qq.com'
MAIL_USE_TLS = False
MAIL_USE_SSL = True
MAIL_PORT = 465
MAIL_USERNAME = '123@qq.com'
MAIL_PASSWORD = 'XXXXX'  # ç”Ÿæˆçš„æˆæƒç 
MAIL_DEFAULT_SENDER = MAIL_USERNAME
```


## ç›´æ¥å®‰è£…é¡¹ç›®

```bash
pip install -r requirements.txt
```

# è¿è¡Œé¡¹ç›®

+ ä¸€èˆ¬æƒ…å†µè¿è¡Œé¡¹ç›®

```bash
# åˆå§‹åŒ–æ•°æ®åº“
flask db init
flask db migrate
flask db upgrade
flask admin init

# è¿è¡Œé¡¹ç›®
flask --app app.py run -h 0.0.0.0 -p 8000 --debug

# æˆ–è€…ç›´æ¥è°ƒç”¨ app.py
python app.py
```

+ ä½¿ç”¨ docker-compose è¿è¡Œé¡¹ç›®

```bash
git clone https://gitee.com/pear-admin/pear-admin-flask

# å®‰è£… docker-compose 
curl -L https://github.com/docker/compose/releases/download/1.26.2/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose 

# è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œæœ‰è¾“å‡ºç‰ˆæœ¬ï¼Œè¡¨ç¤º docker-compose å¯ä»¥ç”¨äº†
docker-compose --version 

# åœ¨å½“å‰ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ä»¥è¿è¡Œ app
docker-compose -f dockercompose.yaml up

# çœ‹åˆ°å¦‚ä¸‹è¡¨ç¤ºè¿è¡ŒæˆåŠŸï¼Œç”±äº pip ä¸‹è½½æ…¢ï¼Œéœ€è¦ä¸€äº›æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼›å¦‚æœå®‰è£…å¤±è´¥ï¼Œé‡æ–°æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤å³å¯ã€‚

# è¿è¡Œååœ¨æµè§ˆå™¨è®¿é—® 127.0.0.1:5000 

#å¦‚æœè¦åœæ­¢å®¹å™¨è¿è¡Œï¼Œåœ¨å½“å‰æ–‡ä»¶å¤¹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
docker-compose -f dockercompose.yaml down
```


é»˜è®¤ç”¨æˆ·ä¸º `admin` ï¼Œå¯†ç é»˜è®¤ä¸º `123456` ã€‚